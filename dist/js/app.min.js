!function(){"use strict";const t=document.querySelector(".info-messages"),e=document.querySelector(".info-messages__body");var n=function(n,o){t.classList.add("show"),e.innerHTML=`\n\t<div class="info-messages__img">\n\t\t<div class="info-messages__img-container">\n\t\t\t<img src="./images/dist/${"ok"===o?"ok.svg":"error.svg"}" alt="${n}">\n\t\t</div>\n\t\t</div>\n\t\t<div class="info-messages__message">\n\t\t\t<span>${n}</span>\n\t\t</div>\n\t`,setTimeout((()=>{t.classList.remove("show"),e.textContent=""}),3e3)};var o=()=>{localStorage.getItem("fullCarConfig")&&e();function t(t){return t.map((t=>t.percent)).reduce(((t,e)=>t+e),0)/t.length}function e(){document.querySelector(".saved-config__items").innerHTML="";JSON.parse(localStorage.getItem("fullCarConfig")).forEach(((e,n)=>{!function(e,n){document.querySelector(".saved-config__items").insertAdjacentHTML("beforeEnd",`\n\t\t\t<div id="config_${n}" class="saved-config__item config">\n\t\t\t\t<fieldset>\n\t\t\t\t\t<legend class="config__title" align="right">Config ${n+1}</legend>\n\t\t\t\t\t\t<ul class="config__list">\n\t\t\t\t\t\t\t${function(t){const e=document.createElement("div");return t.forEach((t=>{e.insertAdjacentHTML("beforeEnd",`\n\t\t\t\t<li class="config__li">\n\t\t\t\t\t<span class="config__part">${t.part}:</span>\n\t\t\t\t\t<span class="config__value">${t.percent}%</span>\t\n\t\t\t\t</li>\n\t\t\t`)})),e.innerHTML}(e)}\n\t\t\t\t\t\t\t<li class="config__li total">\n\t\t\t\t\t\t\t\t<span class="config__part">Total:</span>\n\t\t\t\t\t\t\t\t<span class="config__value">${t(e)}%</span>\t\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="config__buttons">\n\t\t\t\t\t\t<a href="#" class="" data-btn="price" data-id="1">More</a>\n\t\t\t\t\t\t<button id="btn_${n}" class="config__button" data-btn="remove" data-id="${n}">\n\t\t\t\t\t\t\t<img src="images/dist/delete.svg" alt="delete">\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</fieldset>\n\t\t\t</div>\n\t\t\t`)}(e,n),o()}))}function o(){const t=document.querySelector(".saved-config__items"),e=document.querySelector(".saved-config__sum");e.textContent="0",e.textContent=t.childElementCount}function a(t,e){const n=Object.getOwnPropertyNames(t),o=Object.getOwnPropertyNames(e);if(n.length!==o.length)return!1;for(let o=0;o<n.length;o+=1){const r=n[o],s="object"==typeof t[r]&&"object"==typeof e[r];if(!s&&t[r]!==e[r]||s&&!a(t[r],e[r]))return!1}return!0}document.getElementById("save-config").addEventListener("click",(()=>{const o=JSON.parse(localStorage.getItem("carConfig"));t(o)?localStorage.getItem("fullCarConfig")?function(){const t=JSON.parse(localStorage.getItem("carConfig")),o=JSON.parse(localStorage.getItem("fullCarConfig"));let r=o.filter(((t,e)=>e===o.length-1));o.length<3?a(r[0],t)?n("This configuration has already been saved","error"):function(){const t=JSON.parse(localStorage.getItem("carConfig")),o=[...JSON.parse(localStorage.getItem("fullCarConfig")),t];localStorage.setItem("fullCarConfig",JSON.stringify(o)),e(),n("successfully saved","ok")}():n("the maximum quantity of configurations is - 3","error")}():localStorage.getItem("fullCarConfig")||(localStorage.setItem("fullCarConfig",JSON.stringify([o])),e(),n("successfully saved","ok")):n("create configurations","error")})),function(){const t=document.querySelector(".saved-config__items");t.addEventListener("click",(a=>{a.preventDefault();const r=JSON.parse(localStorage.getItem("fullCarConfig"));if(a.target.parentNode.classList.contains("config__button")){let s=+a.target.parentNode.id.split("_")[1];const c=r.filter(((t,e)=>e!==s));localStorage.setItem("fullCarConfig",JSON.stringify(c)),e(),r.length<2&&(localStorage.removeItem("fullCarConfig"),o(),t.textContent="No saved config"),n("successfully deleted","ok")}}))}(),function(){const t=document.querySelector(".saved-config");document.querySelector(".saved-config__button").addEventListener("click",(()=>{t.classList.toggle("show")}))}(),o()};const a=t=>56*Math.PI-t/100*28*2*Math.PI,r=t=>document.querySelector(".percent-block__item").offsetHeight/101*t;function s(){const t=document.querySelectorAll(".car-panel__item"),e=JSON.parse(localStorage.getItem("carConfig"));t.forEach((t=>{let n=e.filter((e=>e.part===t.dataset.panel));t.querySelector(".progress-ring").style.strokeDashoffset=a(n[0].percent),t.querySelector(".percent").textContent=n[0].percent,t.querySelector(".percent-block__item").style.top=`-${r(n[0].percent)}px`})),function(){const t=document.querySelector(".total-value__progress"),e=document.querySelector(".total-value__curretnt-value"),n=JSON.parse(localStorage.getItem("carConfig"));let o=n.map((t=>t.percent)).reduce(((t,e)=>t+e),0);t.style.width=o/n.length+"%",e.textContent=o/n.length+"%"}()}function c(t){const e=JSON.parse(localStorage.getItem("carConfig"));if(e){let o=e.filter((e=>e.part===t));o[0].percent>0?(n=o[0].part,l.forEach((t=>{t.dataset.parts===n&&t.classList.add("active")}))):0==o[0].percent&&function(t){l.forEach((e=>{e.dataset.parts===t&&e.classList.remove("active")}))}(o[0].part)}var n}const l=document.querySelectorAll(".part");var i=()=>{function t(){document.querySelectorAll(".car-panel__item").forEach((t=>{t.querySelector(".progress-ring").style.strokeDashoffset=a(100),t.querySelector(".percent-block__item").style.top=`-${r(100)}px`})),setTimeout(s,1e3)}t();const e=()=>{const t=document.querySelectorAll(".part");t.forEach(((e,o)=>{e.dataset.parts&&setTimeout((()=>{e.classList.add("active"),t.length-1==o&&n()}),200*o)}))};e();const n=()=>{document.querySelectorAll(".part").forEach(((t,e)=>{t.dataset.parts&&setTimeout((()=>{c(t.dataset.parts)}),200*e)}))};function o(){const t=document.querySelector(".total-value__progress"),e=document.querySelector(".total-value__curretnt-value");t.style.width="100%",e.textContent="100%"}document.getElementById("animation").addEventListener("click",(()=>{t(),e(),o()})),o()};const d={};window.modalWindow=d;var u=d;function p(){}function f(t){const e=document.createElement("div");e.classList.add("vmodal"),e.insertAdjacentHTML("afterbegin",`\n    <div class="modal-overlay" data-close="true">\n      <div class="modal-window" style="width: ${t.width||"600px"}">\n        <div class="modal-header">\n          <span class="modal-title">${t.title||"Окно"}</span>\n          ${t.closable?'<span class="modal-close" data-close="true">&times;</span>':""}\n        </div>\n        <div class="modal-body" data-content>\n          ${t.content||""}\n        </div>\n      </div>\n    </div>\n  `);const n=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===t.length)return document.createElement("div");const e=document.createElement("div");return e.classList.add("modal-footer"),t.forEach((t=>{const n=document.createElement("button");n.textContent=t.text,n.classList.add("btn"),n.classList.add(`btn-${t.type||"secondary"}`),n.onclick=t.handler||p,e.appendChild(n)})),e}(t.footerButtons);return n.appendAfter(e.querySelector("[data-content]")),document.body.appendChild(e),e}modalWindow.confirm=function(t){return new Promise(((e,n)=>{const o=modalWindow.modal({title:t.title,width:"400px",closable:!1,content:t.content,onClose(){o.destroy()},footerButtons:[{text:"Отмена",type:"secondary",handler(){o.close(),n()}},{text:"Удалить",type:"danger",handler(){o.close(),e()}}]});setTimeout((()=>o.open()),100)}))},Element.prototype.appendAfter=function(t){t.parentNode.insertBefore(this,t.nextSibling)},modalWindow.modal=function(t){const e=f(t);let n=!1,o=!1;const a={open(){if(o)return console.log("Modal is destroyed");!n&&e.classList.add("open")},close(){n=!0,e.classList.remove("open"),e.classList.add("hide"),setTimeout((()=>{e.classList.remove("hide"),n=!1,"function"==typeof t.onClose&&t.onClose()}),200)}},r=t=>{t.target.dataset.close&&a.close()};return e.addEventListener("click",r),Object.assign(a,{destroy(){e.parentNode.removeChild(e),e.removeEventListener("click",r),o=!0},setContent(t){e.querySelector("[data-content]").innerHTML=t}})},console.log(window);var g=()=>{document.querySelectorAll(".saved-config__item");const t=u.modal({title:"Цена на Товар",closable:!0,width:"400px",footerButtons:[{text:"Закрыть",type:"primary",handler(){t.close()}}]});document.addEventListener("click",(e=>{e.preventDefault();const n=e.target.dataset.btn;e.target.dataset.id;"price"===n?(t.setContent("\n      <p>Цена на Title: <strong>Price</strong></p>\n    "),t.open()):"remove"===n&&u.confirm({title:"Вы уверены?",content:"<p>Вы удаляете фрукт: <strong>Title</strong></p>"}).then((()=>{console.log("render")})).catch((()=>{console.log("Cancel")}))}))};i(),o(),g();const m=document.querySelector(".car"),v=document.querySelectorAll(".part"),y=document.querySelector(".hint"),_=[{part:"door",percent:0},{part:"threshold",percent:0},{part:"wing",percent:0},{part:"roof",percent:0},{part:"hood",percent:0}],S=JSON.parse(localStorage.getItem("carConfig"));localStorage.getItem("carConfig")?S.forEach((t=>{C(t.part,t.percent),c(t.part)})):(_.forEach((t=>{C(t.part,t.percent),c(t.part)})),localStorage.setItem("carConfig",JSON.stringify(_)));document.querySelector(".car-panel__items").addEventListener("click",(t=>{if(t.target.closest(".car-panel__item")){const e=t.target.dataset.panel;h(e),I(),y.classList.add("visible"),t.pageX+y.offsetWidth<document.body.offsetWidth?(y.style.top=t.pageY-70+"px",y.style.left=t.pageX+15+"px"):(y.style.top=t.pageY-70+"px",y.style.left=t.pageX-y.offsetWidth-10+"px")}else t.target.closest(".carPanelItems")||y.classList.remove("visible")})),m.addEventListener("click",(t=>{if(t.target.parentNode.closest(".part")){const e=t.target.parentNode.dataset.parts;h(e),I(),y.classList.add("visible"),t.pageX+y.offsetWidth<document.body.offsetWidth?(y.style.top=t.pageY-70+"px",y.style.left=t.pageX+15+"px"):(y.style.top=t.pageY+10+"px",y.style.left=t.pageX-y.offsetWidth-10+"px")}else t.target.parentNode.closest(".car")||y.classList.remove("visible")}));const h=t=>{const e=document.querySelector(".part-info__title"),n=document.querySelector(".part-info__input");e.textContent=`${t}`,n.value=`${function(t){return JSON.parse(localStorage.getItem("carConfig")).filter((e=>e.part===t))[0].percent}(t)}`,n.dataset.input=`${t}`};function C(t,e){const n=document.querySelector(".car-panel__items");let o=56*Math.PI;n.insertAdjacentHTML("beforeEnd",`\n\t\t<li class="car-panel__item" data-panel="${t}">\n\t\t\t<div class="car-panel__name">\n\t\t\t${t}\n\t\t\t</div>\n\t\t\t<div class="car-panel__progress progress">\n\t\t\t\t<div class="progress__item">\n\t\t\t\t<svg\t\t\t\t\n\t\t\t\t\twidth="80"\n\t\t\t\t\theight="80">\n\t\t\t\t\t<circle\t\t\t\t \n\t\t\t\t\t\tstroke="#9e9e9e"\n\t\t\t\t\t\tstroke-width="5"\n\t\t\t\t\t\tfill="transparent"\n\t\t\t\t\t\tr="28"\n\t\t\t\t\t\tcx="40"\n\t\t\t\t\t\tcy="40"/>\n\t\t\t\t\t<circle\n\t\t\t\t\t\tclass="progress-ring"\n\t\t\t\t\t\tstroke-dasharray="${o} ${o}"\n\t\t\t\t\t\tstyle="stroke-dashoffset:${a(e)}"\n\t\t\t\t\t\tstroke="#5fdd5a"\n\t\t\t\t\t\tstroke-width="5"\n\t\t\t\t\t\tfill="transparent"\n\t\t\t\t\t\tprogress="0"\n\t\t\t\t\t\tr="28"\n\t\t\t\t\t\tcx="40"\n\t\t\t\t\t\tcy="40"/>\n\t\t\t\t\t</svg>\n\t\t\t\t\t<style>\n\t\t\t\t\t.progress-ring {\n\t\t\t\t\t\ttransition: stroke-dashoffset 1s;\n\t\t\t\t\t\ttransform: rotate(-90deg);\n\t\t\t\t\t\ttransform-origin: 50% 50%;\t\n\t\t\t\t\t}\n\t\t\t\t\t</style>\n\t\t\t\t\t<div style="display: none;" class="progress__percent"><span class="percent">${e}</span>%</div>\n\n\t\t\t\t\t<div class="percent-block">\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</li>\n\t\t`)}document.querySelector(".part-info__button").addEventListener("click",(t=>{t.preventDefault(),y.classList.remove("visible")}));const L=document.querySelectorAll(".percent-block");L&&L.forEach((t=>{t.insertAdjacentElement("beforeEnd",function(t){const e=document.createElement("div");e.classList.add("percent-block__item");for(let n=0;n<t+1;n++)e.innerHTML+=`<span>${n}%</span>`;return e}(100))}));document.getElementById("reset").addEventListener("click",(()=>E()));const E=()=>{y.classList.remove("visible"),v.forEach((t=>{t.classList.contains("active")&&t.classList.remove("active")})),localStorage.setItem("carConfig",JSON.stringify(_)),s(),n("data has been successfully reset","ok")};document.querySelectorAll(".car-panel__item").forEach((t=>{t.addEventListener("mouseover",(t=>{let e=t.target.dataset.panel.toLowerCase();b(e)})),t.addEventListener("mouseout",(t=>{let e=t.target.dataset.panel.toLowerCase();b(e)}))}));const b=t=>{v.forEach((e=>{e.dataset.parts===t&&e.classList.toggle("hover")}))};v.forEach((t=>{t.addEventListener("mouseover",(function(t){if(t.target.parentNode.closest(".part")){let e=t.target.parentNode.dataset.parts.toLowerCase();q(e)}})),t.addEventListener("mouseout",(t=>{let e=t.target.parentNode.dataset.parts.toLowerCase();q(e)}))}));const q=t=>{document.querySelectorAll(".car-panel__item").forEach((e=>{e.dataset.panel===t&&e.classList.toggle("hover")}))},N=(new Date).getFullYear();function I(){const t=document.querySelector(".part-info__input");t.addEventListener("change",(e=>{if(t.value<101&&t.value>-1){const e=JSON.parse(localStorage.getItem("carConfig")),n=[];e.forEach((e=>{n.push(e),e.part===t.dataset.input&&(e.percent=+t.value)})),localStorage.setItem("carConfig",JSON.stringify(n)),s(),c(t.dataset.input)}}))}document.getElementById("date").innerText=N;const k=document.querySelector(".part-info__input"),w=document.querySelector(".up"),x=document.querySelector(".down");w.onclick=function(){let t=parseInt(k.value,10);if(t=isNaN(t)?0:t,t+=10,t<101&&t>-1){k.value=t;const e=JSON.parse(localStorage.getItem("carConfig")),n=[];e.forEach((t=>{n.push(t),t.part===k.dataset.input&&(t.percent=+k.value)})),localStorage.setItem("carConfig",JSON.stringify(n)),s(),c(k.dataset.input)}},x.onclick=function(){let t=parseInt(k.value,10);if(t=isNaN(t)?0:t,t-=10,t<101&&t>-1){k.value=t;const e=JSON.parse(localStorage.getItem("carConfig")),n=[];e.forEach((t=>{n.push(t),t.part===k.dataset.input&&(t.percent=+k.value)})),localStorage.setItem("carConfig",JSON.stringify(n)),s(),c(k.dataset.input)}}}();