!function(){"use strict";const t=document.querySelector(".info-messages"),e=document.querySelector(".info-messages__body");var n=function(n,a){t.classList.add("show"),e.innerHTML=`\n\t<div class="info-messages__img">\n\t\t<div class="info-messages__img-container">\n\t\t\t<img src="./images/dist/${"ok"===a?"ok.svg":"error.svg"}" alt="${n}">\n\t\t</div>\n\t\t</div>\n\t\t<div class="info-messages__message">\n\t\t\t<span>${n}</span>\n\t\t</div>\n\t`,setTimeout((()=>{t.classList.remove("show"),e.textContent=""}),3e3)};var a=()=>{localStorage.getItem("fullCarConfig")&&e();function t(t){return t.map((t=>t.percent)).reduce(((t,e)=>t+e),0)/t.length}function e(){document.querySelector(".saved-config__items").innerHTML="";JSON.parse(localStorage.getItem("fullCarConfig")).forEach(((e,n)=>{!function(e,n){document.querySelector(".saved-config__items").insertAdjacentHTML("beforeEnd",`\n\t\t\t<div id="config_${n}" class="saved-config__item config">\n\t\t\t\t<fieldset>\n\t\t\t\t\t<legend class="config__title" align="right">Config ${n+1}</legend>\n\t\t\t\t\t\t<ul class="config__list">\n\t\t\t\t\t\t\t${function(t){const e=document.createElement("div");return t.forEach((t=>{e.insertAdjacentHTML("beforeEnd",`\n\t\t\t\t<li class="config__li">\n\t\t\t\t\t<span class="config__part">${t.part}:</span>\n\t\t\t\t\t<span class="config__value">${t.percent}%</span>\t\n\t\t\t\t</li>\n\t\t\t`)})),e.innerHTML}(e)}\n\t\t\t\t\t\t\t<li class="config__li total">\n\t\t\t\t\t\t\t\t<span class="config__part">Total:</span>\n\t\t\t\t\t\t\t\t<span class="config__value">${t(e)}%</span>\t\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="config__buttons">\n\t\t\t\t\t\t<button id="btn_${n}" class="config__button">\n\t\t\t\t\t\t\t<img src="images/dist/delete.svg" alt="delete">\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</fieldset>\n\t\t\t</div>\n\t\t\t`)}(e,n),a()}))}function a(){const t=document.querySelector(".saved-config__items"),e=document.querySelector(".saved-config__sum");e.textContent="0",e.textContent=t.childElementCount}function o(t,e){const n=Object.getOwnPropertyNames(t),a=Object.getOwnPropertyNames(e);if(n.length!==a.length)return!1;for(let a=0;a<n.length;a+=1){const r=n[a],s="object"==typeof t[r]&&"object"==typeof e[r];if(!s&&t[r]!==e[r]||s&&!o(t[r],e[r]))return!1}return!0}document.getElementById("save-config").addEventListener("click",(()=>{const a=JSON.parse(localStorage.getItem("carConfig"));t(a)?localStorage.getItem("fullCarConfig")?function(){const t=JSON.parse(localStorage.getItem("carConfig")),a=JSON.parse(localStorage.getItem("fullCarConfig"));let r=a.filter(((t,e)=>e===a.length-1));a.length<3?o(r[0],t)?n("This configuration has already been saved","error"):function(){const t=JSON.parse(localStorage.getItem("carConfig")),a=[...JSON.parse(localStorage.getItem("fullCarConfig")),t];localStorage.setItem("fullCarConfig",JSON.stringify(a)),e(),n("successfully saved","ok")}():n("the maximum quantity of configurations is - 3","error")}():localStorage.getItem("fullCarConfig")||(localStorage.setItem("fullCarConfig",JSON.stringify([a])),e(),n("successfully saved","ok")):n("create configurations","error")})),function(){const t=document.querySelector(".saved-config__items");t.addEventListener("click",(o=>{o.preventDefault();const r=JSON.parse(localStorage.getItem("fullCarConfig"));if(o.target.parentNode.classList.contains("config__button")){let s=+o.target.parentNode.id.split("_")[1];const c=r.filter(((t,e)=>e!==s));localStorage.setItem("fullCarConfig",JSON.stringify(c)),e(),r.length<2&&(localStorage.removeItem("fullCarConfig"),a(),t.textContent="No saved config"),n("successfully deleted","ok")}}))}(),function(){const t=document.querySelector(".saved-config");document.querySelector(".saved-config__button").addEventListener("click",(()=>{t.classList.toggle("show")}))}(),a()};const o=t=>56*Math.PI-t/100*28*2*Math.PI,r=t=>document.querySelector(".percent-block__item").offsetHeight/101*t;function s(){const t=document.querySelector(".total-value__progress"),e=document.querySelector(".total-value__curretnt-value"),n=JSON.parse(localStorage.getItem("carConfig"));let a=n.map((t=>t.percent)).reduce(((t,e)=>t+e),0);t.style.width=a/n.length+"%",e.textContent=a/n.length+"%"}function c(){const t=document.querySelectorAll(".car-panel__item"),e=JSON.parse(localStorage.getItem("carConfig"));t.forEach((t=>{let n=e.filter((e=>e.part===t.dataset.panel));t.querySelector(".progress-ring").style.strokeDashoffset=o(n[0].percent),t.querySelector(".percent").textContent=n[0].percent,t.querySelector(".percent-block__item").style.top=`-${r(n[0].percent)}px`})),s()}function l(t){const e=JSON.parse(localStorage.getItem("carConfig"));if(e){let a=e.filter((e=>e.part===t));a[0].percent>0?(n=a[0].part,i.forEach((t=>{t.dataset.parts===n&&t.classList.add("active")}))):0==a[0].percent&&function(t){i.forEach((e=>{e.dataset.parts===t&&e.classList.remove("active")}))}(a[0].part)}var n}s();const i=document.querySelectorAll(".part");var d=()=>{document.querySelectorAll(".saved-config__item")};(()=>{function t(){document.querySelectorAll(".car-panel__item").forEach((t=>{t.querySelector(".progress-ring").style.strokeDashoffset=o(100),t.querySelector(".percent-block__item").style.top=`-${r(100)}px`})),setTimeout(c,1e3)}t();const e=()=>{const t=document.querySelectorAll(".part");t.forEach(((e,a)=>{e.dataset.parts&&setTimeout((()=>{e.classList.add("active"),t.length-1==a&&n()}),200*a)}))};e();const n=()=>{document.querySelectorAll(".part").forEach(((t,e)=>{t.dataset.parts&&setTimeout((()=>{l(t.dataset.parts)}),200*e)}))};function a(){const t=document.querySelector(".total-value__progress"),e=document.querySelector(".total-value__curretnt-value");t.style.width="100%",e.textContent="100%"}document.getElementById("animation").addEventListener("click",(()=>{t(),e(),a()})),a()})(),a(),d();const u=document.querySelector(".car"),g=document.querySelectorAll(".part"),f=document.querySelector(".hint"),p=[{part:"door",percent:0},{part:"threshold",percent:0},{part:"wing",percent:0},{part:"roof",percent:0},{part:"hood",percent:0}],m=JSON.parse(localStorage.getItem("carConfig"));localStorage.getItem("carConfig")?m.forEach((t=>{_(t.part,t.percent),l(t.part)})):(p.forEach((t=>{_(t.part,t.percent),l(t.part)})),localStorage.setItem("carConfig",JSON.stringify(p)));document.querySelector(".car-panel__items").addEventListener("click",(t=>{if(t.target.closest(".car-panel__item")){const e=t.target.dataset.panel;v(e),L(),f.classList.add("visible"),t.pageX+f.offsetWidth<document.body.offsetWidth?(f.style.top=t.pageY-70+"px",f.style.left=t.pageX+15+"px"):(f.style.top=t.pageY-70+"px",f.style.left=t.pageX-f.offsetWidth-10+"px")}else t.target.closest(".carPanelItems")||f.classList.remove("visible")})),u.addEventListener("click",(t=>{if(t.target.parentNode.closest(".part")){const e=t.target.parentNode.dataset.parts;v(e),L(),f.classList.add("visible"),t.pageX+f.offsetWidth<document.body.offsetWidth?(f.style.top=t.pageY-70+"px",f.style.left=t.pageX+15+"px"):(f.style.top=t.pageY+10+"px",f.style.left=t.pageX-f.offsetWidth-10+"px")}else t.target.parentNode.closest(".car")||f.classList.remove("visible")}));const v=t=>{const e=document.querySelector(".part-info__title"),n=document.querySelector(".part-info__input");e.textContent=`${t}`,n.value=`${function(t){return JSON.parse(localStorage.getItem("carConfig")).filter((e=>e.part===t))[0].percent}(t)}`,n.dataset.input=`${t}`};function _(t,e){const n=document.querySelector(".car-panel__items");let a=56*Math.PI;n.insertAdjacentHTML("beforeEnd",`\n\t\t<li class="car-panel__item" data-panel="${t}">\n\t\t\t<div class="car-panel__name">\n\t\t\t${t}\n\t\t\t</div>\n\t\t\t<div class="car-panel__progress progress">\n\t\t\t\t<div class="progress__item">\n\t\t\t\t<svg\t\t\t\t\n\t\t\t\t\twidth="80"\n\t\t\t\t\theight="80">\n\t\t\t\t\t<circle\t\t\t\t \n\t\t\t\t\t\tstroke="#9e9e9e"\n\t\t\t\t\t\tstroke-width="5"\n\t\t\t\t\t\tfill="transparent"\n\t\t\t\t\t\tr="28"\n\t\t\t\t\t\tcx="40"\n\t\t\t\t\t\tcy="40"/>\n\t\t\t\t\t<circle\n\t\t\t\t\t\tclass="progress-ring"\n\t\t\t\t\t\tstroke-dasharray="${a} ${a}"\n\t\t\t\t\t\tstyle="stroke-dashoffset:${o(e)}"\n\t\t\t\t\t\tstroke="#5fdd5a"\n\t\t\t\t\t\tstroke-width="5"\n\t\t\t\t\t\tfill="transparent"\n\t\t\t\t\t\tprogress="0"\n\t\t\t\t\t\tr="28"\n\t\t\t\t\t\tcx="40"\n\t\t\t\t\t\tcy="40"/>\n\t\t\t\t\t</svg>\n\t\t\t\t\t<style>\n\t\t\t\t\t.progress-ring {\n\t\t\t\t\t\ttransition: stroke-dashoffset 1s;\n\t\t\t\t\t\ttransform: rotate(-90deg);\n\t\t\t\t\t\ttransform-origin: 50% 50%;\t\n\t\t\t\t\t}\n\t\t\t\t\t</style>\n\t\t\t\t\t<div style="display: none;" class="progress__percent"><span class="percent">${e}</span>%</div>\n\n\t\t\t\t\t<div class="percent-block">\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</li>\n\t\t`)}document.querySelector(".part-info__button").addEventListener("click",(t=>{t.preventDefault(),f.classList.remove("visible")}));const S=document.querySelectorAll(".percent-block");S&&S.forEach((t=>{t.insertAdjacentElement("beforeEnd",function(t){const e=document.createElement("div");e.classList.add("percent-block__item");for(let n=0;n<t+1;n++)e.innerHTML+=`<span>${n}%</span>`;return e}(100))}));document.getElementById("reset").addEventListener("click",(()=>y()));const y=()=>{f.classList.remove("visible"),g.forEach((t=>{t.classList.contains("active")&&t.classList.remove("active")})),localStorage.setItem("carConfig",JSON.stringify(p)),c(),n("data has been successfully reset","ok")};document.querySelectorAll(".car-panel__item").forEach((t=>{t.addEventListener("mouseover",(t=>{let e=t.target.dataset.panel.toLowerCase();h(e)})),t.addEventListener("mouseout",(t=>{let e=t.target.dataset.panel.toLowerCase();h(e)}))}));const h=t=>{g.forEach((e=>{e.dataset.parts===t&&e.classList.toggle("hover")}))};g.forEach((t=>{t.addEventListener("mouseover",(function(t){if(t.target.parentNode.closest(".part")){let e=t.target.parentNode.dataset.parts.toLowerCase();C(e)}})),t.addEventListener("mouseout",(t=>{let e=t.target.parentNode.dataset.parts.toLowerCase();C(e)}))}));const C=t=>{document.querySelectorAll(".car-panel__item").forEach((e=>{e.dataset.panel===t&&e.classList.toggle("hover")}))},E=(new Date).getFullYear();function L(){const t=document.querySelector(".part-info__input");t.addEventListener("change",(e=>{if(t.value<101&&t.value>-1){const e=JSON.parse(localStorage.getItem("carConfig")),n=[];e.forEach((e=>{n.push(e),e.part===t.dataset.input&&(e.percent=+t.value)})),localStorage.setItem("carConfig",JSON.stringify(n)),c(),l(t.dataset.input)}}))}document.getElementById("date").innerText=E;const q=document.querySelector(".part-info__input"),I=document.querySelector(".up"),N=document.querySelector(".down");I.onclick=function(){let t=parseInt(q.value,10);if(t=isNaN(t)?0:t,t+=10,t<101&&t>-1){q.value=t;const e=JSON.parse(localStorage.getItem("carConfig")),n=[];e.forEach((t=>{n.push(t),t.part===q.dataset.input&&(t.percent=+q.value)})),localStorage.setItem("carConfig",JSON.stringify(n)),c(),l(q.dataset.input)}},N.onclick=function(){let t=parseInt(q.value,10);if(t=isNaN(t)?0:t,t-=10,t<101&&t>-1){q.value=t;const e=JSON.parse(localStorage.getItem("carConfig")),n=[];e.forEach((t=>{n.push(t),t.part===q.dataset.input&&(t.percent=+q.value)})),localStorage.setItem("carConfig",JSON.stringify(n)),c(),l(q.dataset.input)}}}();